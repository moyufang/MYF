
# 四元数的构造

四元数是非交换除环的代数，由复数域构造，一个四元数是两个复数的有序对，增加基 $j$ 来表示
$$
(a_{0}+a_{1}i)+(a_{2}+a_{3}i)j
$$
记 $k=ij$，同时规定 $ij=-ji$，由分配率推出两个四元数的乘法。

如果将四元数写成两个复数的有序对，则四元数乘法为
$$
(a,b)(c,d)=(ac-bd^{*},ad+bc^{*})
$$
其中 ${}^{*}$ 表示共轭，同时四元数的共轭定义为 $(a,b)^{*}=(a^{*},-b)$。

这样的构造方法被称作 $\text{Cayley-Dickson}$ 构造。

# 四元数的运算

将四元数用 “标量+矢量” 也即 “实部+虚部” 表示，则四元数的乘法与向量的点积和叉积有了联系
$$
(a_{0}+\vec{a})(b_{0}+\vec{b})=(a_{0}b_{0}-\vec{a}\cdot\vec{b})+(a_{0}\vec{b}+\vec{a}b_{0}+\vec{a}\times\vec{b})
$$
虚部中的 $\vec{a}\times\vec{b}$ 意味着四元数乘法不再交换。

验算可知，四元数的乘法满足结合率。

四元数的逆与复数的逆有相同形式
$$
q^{-1}={q^{*}\over |q|^{2}}
$$
其中 $|q|$ 是四元数 $|q|$ 的模，即四元组的 $2$ 范数。

纯虚四元数就是矢量，让三个纯虚四元数相乘，通过结合律可导出矢量分析中重要的公式，设 $a,b,c$ 都是纯虚四元数，将 $(ab)c=a(bc)$ 展开并对比实部和虚部可得
$$
\begin{cases}
a\cdot(b\times c)=(a\times b)\cdot c \\
a\times(b\times c)-a(b\cdot c)=(a\times b)\times c-(a\cdot b)c
\end{cases}
$$

四元数与三维向量的旋转有着紧密联系，考虑一个情景，让向量 $v$ 绕单位向量 $u$ 逆时针旋转 $\theta$ 得到向量 $w$，则
$$
w=(u\cdot v)u+(u\times v)\sin\theta+\left(v-(u\cdot v)u\right)\cos\theta
$$
同时构造单位四元数 $\displaystyle q=\cos{\theta\over2}+u\sin{\theta\over2}$，通过计算可以验证
$$
w=qvq^{-1}
$$
任取四元数 $a$ 和纯虚四元数 $v$，则
$$
ava^{-1}
$$
的效果就是对 $v$ 进行旋转，转轴为 $a$ 的虚部，转角由 $a$ 的实部和虚部模长决定。

在复数域中，复数可以表示成指数形式，同时 $e^{i \theta}e^{i\varphi}=e^{i(\theta+\varphi)}$，也即旋转可交换，那可指数形式推广到四元数中吗？

仿照复数，一个单位四元数的指数可定义为
$$
q=\cos \theta+u\sin\theta=e^{u\theta}
$$
三维空间中，不同轴旋转不可交换，也即
$$
e^{u\theta}e^{v\theta}\neq e^{(u+v)\theta}
$$
但同轴旋转可交换，所以幂运算定义为
$$
q^{t}=e^{ut\theta}\quad (t\in \mathbb{R})
$$
  


# 四元数与旋转插值

