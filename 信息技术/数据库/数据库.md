
# 关系型数据库

### 一、 基础基石：关系模型

关系型数据库的理论基础是埃德加·科德在1970年提出的**关系模型**。

1.  **关系**
    *   **直观理解**：就是一张**二维表格**。
    *   **术语对应**：我们常说的“表”就是关系模型中的“关系”。

2.  **元组**
    *   **直观理解**：表格中的**一行**数据。
    *   **术语对应**：就是一条“记录”。

3.  **属性**
    *   **直观理解**：表格中的**一列**，代表数据的某一类特征。
    *   **术语对应**：就是一个“字段”或“列”。

4.  **域**
    *   **直观理解**：属性的**取值范围或数据类型**。例如，“年龄”属性的域是正整数，“姓名”属性的域是字符串。

---

### 二、 核心构件：表结构与约束

有了表格的基本概念，接下来是如何组织和规范这些表格。

5.  **表**
    *   数据的存储单位，由行和列组成。每个表通常代表一个实体，如 `用户表`、`订单表`。

6.  **主键**
    *   **定义**：一个或多个列的**组合**，其值能**唯一地**标识表中的每一行。
    *   **要求**：**唯一且非空**。
    *   **例子**：`用户表` 中的 `用户ID`，`订单表` 中的 `订单号`。

7.  **外键**
    *   **定义**：一个表中的字段，它是**另一个表的主键**。
    *   **作用**：用于建立和强化两个表之间的**关联**，维护数据的**参照完整性**。
    *   **例子**：`订单表` 中有一个 `用户ID` 字段，这个字段就是外键，它指向 `用户表` 的 `用户ID` 主键，表明这个订单属于哪个用户。

8.  **约束**
    *   用于保证数据库中数据的**准确性和一致性**的规则。
    *   **主要类型**：
        *   **主键约束**：保证唯一性和非空。
        *   **外键约束**：保证引用另一个表的数据必须存在。
        *   **唯一约束**：保证列中的所有值都不同（但允许空值）。
        *   **非空约束**：保证列中不能有 `NULL` 值。
        *   **检查约束**：保证列中的值满足一个指定的条件（如年龄 > 0）。

---

### 三、 操作语言：SQL

关系型数据库通过 **SQL** 进行所有操作。

9.  **SQL**
    *   **定义**：结构化查询语言，是与关系数据库通信的标准语言。
    *   **主要分类**：
        *   **DDL - 数据定义语言**：用于定义和修改数据库结构。
            *   `CREATE`：创建数据库、表、索引等。
            *   `ALTER`：修改现有数据库对象。
            *   `DROP`：删除数据库对象。
        *   **DML - 数据操作语言**：用于对数据进行增、删、改。
            *   `SELECT`：查询数据（虽然常归为DML，但有时也单独称为DQL）。
            *   `INSERT`：插入新数据。
            *   `UPDATE`：更新现有数据。
            *   `DELETE`：删除数据。
        *   **DCL - 数据控制语言**：用于控制数据库的访问权限。
            *   `GRANT`：授予用户权限。
            *   `REVOKE`：撤销用户权限。
        *   **TCL - 事务控制语言**：用于管理事务。
            *   `COMMIT`：提交事务。
            *   `ROLLBACK`：回滚事务。

---

### 四、 高级特性：保证数据可靠与效率

10. **事务**
    *   **定义**：一个不可分割的工作逻辑单元，由一系列SQL操作组成。
    *   **特性**：必须满足 **ACID** 属性：
        *   **原子性**：事务中的所有操作，要么全部完成，要么全部不完成。
        *   **一致性**：事务必须使数据库从一个一致性状态变换到另一个一致性状态。
        *   **隔离性**：并发执行的事务之间互不干扰。
        *   **持久性**：事务一旦提交，其对数据的改变就是永久性的。
    *   **例子**：银行转账（A扣款，B加款）必须在一个事务中，要么都成功，要么都失败。

11. **索引**
    *   **定义**：类似于书籍的目录，它是数据库中的一个**数据结构**，能够极大地加快数据的检索速度。
    *   **原理**：通过避免全表扫描，快速定位到所需数据。
    *   **代价**：索引会占用额外空间，并且会降低数据插入、更新和删除的速度（因为索引也需要维护）。

12. **范式**
    *   **定义**：数据库设计时需要遵循的规范，目的是为了减少数据冗余，提高数据一致性。
    *   **常见范式**：
        *   **第一范式**：每个列都是不可再分的原子值。
        *   **第二范式**：满足第一范式，且非主属性完全依赖于主键（消除部分依赖）。
        *   **第三范式**：满足第二范式，且非主属性之间没有传递依赖（消除传递依赖）。
    *   **通俗理解**：遵循范式就是让每个表只描述一件事情。

